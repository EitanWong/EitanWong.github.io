<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CG语言-函数 | Eitan&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="自定义函数 在ShaderLabCG中函数的定义与C语言类似 void func () { } 定义函数的格式如下 返回值类型 函数名 (参数1,参数2,参数3,......) { //函数体 return//返回值 } 函数的前项声明 💡 在Cg语言当中函数的定义要写在后面调用它的方法之前 如果一定要写在后面可以使用前项声明 如">
<meta name="author" content="Eitan">
<link rel="canonical" href="http://localhost:1313/en/posts/shader/cg%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.0dcd30655f684635e8d387636982f36d45e2607d9dde19da5180cecacb25b773.css" integrity="sha256-Dc0wZV9oRjXo04djaYLzbUXiYH2d3hnaUYDOysslt3M=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
        onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://localhost:1313/img/Avatar.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/img/Avatar.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/img/Avatar.png">
<link rel="apple-touch-icon" href="http://localhost:1313/img/Avatar.png">
<link rel="mask-icon" href="http://localhost:1313/img/Avatar.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/en/posts/shader/cg%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.min.js"></script>



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta property="og:title" content="CG语言-函数" />
<meta property="og:description" content="自定义函数 在ShaderLabCG中函数的定义与C语言类似 void func () { } 定义函数的格式如下 返回值类型 函数名 (参数1,参数2,参数3,......) { //函数体 return//返回值 } 函数的前项声明 💡 在Cg语言当中函数的定义要写在后面调用它的方法之前 如果一定要写在后面可以使用前项声明 如" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/en/posts/shader/cg%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-05T22:25:52+00:00" />
<meta property="article:modified_time" content="2023-04-05T22:25:52+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="CG语言-函数"/>
<meta name="twitter:description" content="自定义函数 在ShaderLabCG中函数的定义与C语言类似 void func () { } 定义函数的格式如下 返回值类型 函数名 (参数1,参数2,参数3,......) { //函数体 return//返回值 } 函数的前项声明 💡 在Cg语言当中函数的定义要写在后面调用它的方法之前 如果一定要写在后面可以使用前项声明 如"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [

        {
          "@type": "ListItem",
          "position":  1 ,
          "name": "Posts",
          "item": "http://localhost:1313/en/posts/"
        },

        {
          "@type": "ListItem",
          "position":  2 ,
          "name": "🖼️ Shader",
          "item": "http://localhost:1313/en/posts/shader/"
        }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "CG语言-函数",
      "item": "http://localhost:1313/en/posts/shader/cg%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CG语言-函数",
  "name": "CG语言-函数",
  "description": "自定义函数 在ShaderLabCG中函数的定义与C语言类似 void func () { } 定义函数的格式如下 返回值类型 函数名 (参数1,参数2,参数3,......) { //函数体 return//返回值 } 函数的前项声明 💡 在Cg语言当中函数的定义要写在后面调用它的方法之前 如果一定要写在后面可以使用前项声明 如",
  "keywords": [
    
  ],
  "articleBody": "自定义函数 在ShaderLabCG中函数的定义与C语言类似\nvoid func () { } 定义函数的格式如下\n返回值类型 函数名 (参数1,参数2,参数3,......) { //函数体 return//返回值 } 函数的前项声明 💡 在Cg语言当中函数的定义要写在后面调用它的方法之前 如果一定要写在后面可以使用前项声明\n如果函数写在调用它之前，并且没有进行前项声明，则会报错\n前项声明示例子如下：\nfixed4 func(fixed4 col); void frag(inout fixed4 col:COLOR) { col=func(col); } fixed4 func (fixed4 col) { col.x=1; return col; } Cg include 内置着色器 include 文件 Unity 提供了若干文件供 用于引入预定义的变量和 helper 函数。这可以通过标准 #include 指令来完成，例如：\nCGPROGRAM // ... #include\"UnityCG.cginc\" // ... ENDCG Unity 中的着色器 include 文件采用 .cginc 扩展名，内置的着色器 include 文件包括：\nHLSLSupport.cginc -_（自动包含）_用于跨平台着色器编译的 helper 宏和定义。 UnityShaderVariables.cginc -_（自动包含）_常用的全局变量。 UnityCG.cginc - 常用的 。 AutoLight.cginc - 光照和阴影功能，例如 在内部使用此文件。 Lighting.cginc - 标准 光照模型；当您编写表面着色器时会自动包含。 TerrainEngine.cginc - 地形和植被着色器的 helper 函数。 如果您要查看任何 helper 代码具体执行的操作，可在 Unity 应用程序中找到这些文件（Windows 上位于 {unity 安装路径}/Data/CGIncludes/UnityCG.cginc__，Mac 上位于 /Applications/Unity/Unity.app/Contents/CGIncludes/UnityCG.cginc__）。\nHLSLSupport.cginc 编译 CGPROGRAM 着色器时会自动包含此文件（但不会对 HLSLPROGRAM 着色器包含此文件）。此文件声明各种 以帮助进行多平台着色器开发。\nUnityShaderVariables.cginc 编译 CGPROGRAM 着色器时会自动包含此文件（但不会对 HLSLPROGRAM 着色器包含此文件）。此文件声明着色器中常用的各种 。\nUnityCG.cginc Shader 对象中通常会包含此文件。此文件声明大量 和数据结构。\nUnityCG.cginc 中的数据结构 struct appdata_base：顶点着色器输入，包含位置、法线和一个纹理坐标。 struct appdata_tan：顶点着色器输入，包含位置、法线、切线和一个纹理坐标。 struct appdata_full：顶点着色器输入，包含位置、法线、切线、顶点颜色和两个纹理坐标。 struct appdata_img: 顶点着色器输入，包含位置和一个纹理坐标。 Cg数学函数Mathematical Functions 几何函数 Geometric Functions 函数\n功能描述\ndistance(pt1, pt2)\n两点之间的欧几里德距离（Euclidean distance）\nfaceforward(N,I,Ng)\n如果dot( Ng , I ) \u003c 0,返回N；否则返回-N。\nlength(v)\n返回一个向量的模,即sqrt(dot(v,v))\nnormalize(v)\n返回v向量的单位向量\nreflect(I, N)\n根据入射光线方向I和表面法向量N计算反射向量,仅对三元向量有效\nrefract(I,N,eta)\n根据入射光线方向I,表面法向量N和折射相对系数eta,计算折射向量。如果对给定的eta,I和N之间的角度太大,返回(0,0,0)。只对三元向量有效\n贴图函数 Texture Map Functions 函数\n功能描述\ntex1D(sampler1D tex, float s)\n一维纹理查询\ntex1D(sampler1D tex, float s, float dsdx, float dsdy)\n使用导数值（derivatives）查询一维纹理\nTex1D(sampler1D tex, float2 sz)\n一维纹理查询,并进行深度值比较\nTex1D(sampler1D tex, float2 sz, float dsdx,float dsdy)\n使用导数值（derivatives）查询一维纹理, 并进行深度值比较\nTex1Dproj(sampler1D tex, float2 sq)\n一维投影纹理查询\nTex1Dproj(sampler1D tex, float3 szq)\n一维投影纹理查询,并比较深度值\nTex2D(sampler2D tex, float2 s)\n二维纹理查询\nTex2D(sampler2D tex, float2 s, float2 dsdx, float2 dsdy)\n使用导数值（derivatives）查询二维纹理\nTex2D(sampler2D tex, float3 sz)\n二维纹理查询,并进行深度值比较\nTex2D(sampler2D tex, float3 sz, float2 dsdx,float2 dsdy)\n使用导数值（derivatives）查询二维纹理,并进行深度值比较\nTex2Dproj(sampler2D tex, float3 sq)\n二维投影纹理查询\nTex2Dproj(sampler2D tex, float4 szq)\n二维投影纹理查询,并进行深度值比较\ntexRECT(samplerRECT tex, float2 s)\n二维非投影矩形纹理查询（OpenGL独有）\ntexRECT (samplerRECT tex, float3 sz, float2 dsdx,float2 dsdy)\n二维非投影使用导数的矩形纹理查询（OpenGL独有）\ntexRECT (samplerRECT tex, float3 sz)\n二维非投影深度比较矩形纹理查询（OpenGL独有）\ntexRECT (samplerRECT tex, float3 sz, float2 dsdx,float2 dsdy)\n二维非投影深度比较并使用导数的矩形纹理查询（OpenGL独有）\ntexRECT proj(samplerRECT tex, float3 sq)\n二维投影矩形纹理查询（OpenGL独有）\ntexRECT proj(samplerRECT tex, float3 szq)\n二维投影矩形纹理深度比较查询（OpenGL独有）\nTex3D(sampler3D tex, float s)\n三维纹理查询\nTex3D(sampler3D tex, float3 s, float3 dsdx, float3 dsdy)\n结合导数值（derivatives）查询三维纹理\nTex3Dproj(sampler3D tex, float4 szq)\n查询三维投影纹理,并进行深度值比较\ntexCUBE(samplerCUBE tex, float3 s)\n查询立方体纹理\ntexCUBE (samplerCUBE tex, float3 s, float3 dsdx, float3 dsdy)\n结合导数值（derivatives）查询立方体纹理\ntexCUBEproj (samplerCUBE tex, float4 sq)\n查询投影立方体纹理\n导数函数 Derivative Functions 函数\n功能描述\nddx(a)\n近似a关于屏幕空间x轴的偏导数\nddy(a)\n近似a关于屏幕空间y轴的偏导数\n调试函数 Debugging Function 函数\n功能描述\nvoid debug(float4 x)\n如果在编译时设置了DEBUG,片段着 色程序中调用该函数可以将值x作为COLOR语义的最终输出；否则该函数什么也不做。\n",
  "wordCount" : "1757",
  "inLanguage": "en",
  "datePublished": "2023-04-05T22:25:52Z",
  "dateModified": "2023-04-05T22:25:52Z",
  "author":{
    "@type": "Person",
    "name": "Eitan"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/en/posts/shader/cg%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Eitan's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/img/Avatar.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    (function () {
        let  arr,reg = new RegExp("(^| )"+"change-themes"+"=([^;]*)(;|$)");
        if(arr = document.cookie.match(reg)) {
        } else {
            if (new Date().getHours() >= 19 || new Date().getHours() < 6) {
                document.body.classList.add('dark');
                localStorage.setItem("pref-theme", 'dark');
            } else {
                document.body.classList.remove('dark');
                localStorage.setItem("pref-theme", 'light');
            }
        }
    })()

    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/en/" accesskey="h" title="Eitan&#39;s Blog (Alt + H)">
            <img src="http://localhost:1313/img/Avatar.png" alt="logo" aria-label="logo"
                 height="35">Eitan&#39;s Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                         fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                         stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/en/" title="🏠 Home">
                <span>🏠 Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/en/search" title="🔍 Search (Alt &#43; /)" accesskey=/>
                <span>🔍 Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/en/posts" title="📚 Posts">
                <span>📚 Posts</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/en/tags" title="🧩 Tags">
                <span>🧩 Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/en/archives/" title="⏱️ Archives">
                <span>⏱️ Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/en/about" title="🙋🏻‍♂️ About">
                <span>🙋🏻‍♂️ About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }
</style>

<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="http://localhost:1313/en/">🏠 Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/en/posts/">Posts</a>&nbsp;»&nbsp;<a href="http://localhost:1313/en/posts/shader/">🖼️ Shader</a></div>
            <h1 class="post-title">
                CG语言-函数
            </h1>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-04-05
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>1757字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>4分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>Eitan
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "http://localhost:1313/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">📖 Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%87%bd%e6%95%b0" aria-label="自定义函数">自定义函数</a><ul>
                        
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e7%9a%84%e5%89%8d%e9%a1%b9%e5%a3%b0%e6%98%8e" aria-label="函数的前项声明">函数的前项声明</a></li></ul>
                </li>
                <li>
                    <a href="#cg-include" aria-label="Cg include">Cg include</a></li>
                <li>
                    <a href="#%e5%86%85%e7%bd%ae%e7%9d%80%e8%89%b2%e5%99%a8-include-%e6%96%87%e4%bb%b6" aria-label="内置着色器 include 文件">内置着色器 include 文件</a><ul>
                        
                <li>
                    <a href="#hlslsupportcginc" aria-label="HLSLSupport.cginc">HLSLSupport.cginc</a></li>
                <li>
                    <a href="#unityshadervariablescginc" aria-label="UnityShaderVariables.cginc">UnityShaderVariables.cginc</a></li>
                <li>
                    <a href="#unitycgcginc" aria-label="UnityCG.cginc">UnityCG.cginc</a><ul>
                        
                <li>
                    <a href="#unitycgcginc-%e4%b8%ad%e7%9a%84%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" aria-label="UnityCG.cginc 中的数据结构">UnityCG.cginc 中的数据结构</a></li></ul>
                </li>
                <li>
                    <a href="#cg%e6%95%b0%e5%ad%a6%e5%87%bd%e6%95%b0mathematical-functions" aria-label="Cg数学函数Mathematical Functions">Cg数学函数Mathematical Functions</a></li>
                <li>
                    <a href="#%e5%87%a0%e4%bd%95%e5%87%bd%e6%95%b0-geometric-functions" aria-label="几何函数 Geometric Functions">几何函数 Geometric Functions</a></li>
                <li>
                    <a href="#%e8%b4%b4%e5%9b%be%e5%87%bd%e6%95%b0-texture-map-functions" aria-label="贴图函数 Texture Map Functions">贴图函数 Texture Map Functions</a></li>
                <li>
                    <a href="#%e5%af%bc%e6%95%b0%e5%87%bd%e6%95%b0-derivative-functions" aria-label="导数函数 Derivative Functions">导数函数 Derivative Functions</a></li>
                <li>
                    <a href="#%e8%b0%83%e8%af%95%e5%87%bd%e6%95%b0-debugging-function" aria-label="调试函数 Debugging Function">调试函数 Debugging Function</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            const id = encodeURI(element.getAttribute('id')).toLowerCase();
            if (element === activeElement){
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
            }
        })
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h1 id="自定义函数">自定义函数<a hidden class="anchor" aria-hidden="true" href="#自定义函数">#</a></h1>
<p>在ShaderLabCG中函数的定义与C语言类似</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>void <span style="color:#66d9ef">func</span> ()
</span></span><span style="display:flex;"><span>{ 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>定义函数的格式如下</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>返回值类型 函数名 (参数1,参数2,参数3,......)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>//函数体
</span></span><span style="display:flex;"><span>return//返回值
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="函数的前项声明">函数的前项声明<a hidden class="anchor" aria-hidden="true" href="#函数的前项声明">#</a></h2>
<p>💡 在Cg语言当中函数的定义要写在后面调用它的方法之前 如果一定要写在后面可以使用前项声明</p>
<blockquote>
<p>如果函数写在调用它之前，并且没有进行前项声明，则会报错</p>
</blockquote>
<p><img loading="lazy" src="data:image/webp;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAoHBwgHBgoICAgLCgoLDhgQDg0NDh0VFhEYIx8lJCIfIiEmKzcvJik0KSEiMEExNDk7Pj4&#43;JS5ESUM8SDc9Pjv/2wBDAQoLCw4NDhwQEBw7KCIoOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozv/wAARCAAqBWkDASIAAhEBAxEB/8QAGgABAAMBAQEAAAAAAAAAAAAAAAUDBAECBv/EADoQAAEDAwEGAwYFBAICAwAAAAECAAMRBBIhkhMF4VIxQVNhIlEUgTKRcaGxBhUjcjSCwSTRFkKi8P/EABoBAQACAwEAAAAAAAAAAAAAAAADBQQBAgb/xAAlEQEBAAIABQMFAQAAAAAAAAAAAQIREiEDBQQUcZETI1GhsfD/2gAMAwEAAhEDEQA/APhppVpmWnAGiiPq9fwfjfr8tO1yfbj/ACZf7z&#43;r7bW0t3OIok1UfsB7y9W6511jjcrMcZu1536/LTtcm36/LTtcnPn9v2UUQVPcSJp3VkEivzDruv27GICq1kWpY1CVkUV&#43;ThnXwWOXavKkt1PbfP4Qm/X5adrk2/X5adrk/KklKilQIINCD4OYtuG2E/ELCzkXPGbhEeSk0VkpZHbtiBX1c6sRO/X5adrk60laUhOKdBT6uTl&#43;G8HTdWabmWO4kEkpiQIcQRQAk6/UddEjU0Lr4Zw23uuJW1tc3BSi4WEI3VCqpVjqK&#43;z79f8AlhG5r6U7XJs19Kdrk5HgvDEcRuwmeRUUGSUFSRqVK0Skevc/gC6&#43;G2Cby5hTIsCNalghKwF&#43;ynLse1ewLDFmvpTtcn6XPNIlCV0IjTikFXYVJp295LkJ7S0trqlxFcwx7rNKCtKlSmtPZUBQDvrr2L9XfDbaCK7CTNvIUxrGShoFgeyoU7ivevyDCLzX0p2uTZr6U7XJydhw6CexNzJHcz0kKVotqExJABzUKGoNT7ux1aLg3xVpDLbToK5biSFAkUE54hGNB7zkfyYRdV5FWKdQB9XJ9zX0p2uT1R8OmltjMhcRISpe63gzxHc08KUPfV6IuDSG3mklWgKjt98IkrBWAaY1HuIP5hhG5r6U7XJs19Kdrk5D&#43;DvN8iFJiXIqZMKkpkBMa1dgr3dj9nQmxlkvPhY1xSKAJKkrGIAFSSe1AKsM2a&#43;lO1ybNfSna5Peng9wpSqSQbtMW&#43;3xk9goyCa1/E0p3fTwW4SQFSwJ/pCVZMmkaCAQVe6uQ07sI/NfSna5NmvpTtcnuVwi5jjmkkVChEONVGQUVkCpOPvqAWt&#43;GyXdvCqFICpFS&#43;0uQBNEJCj&#43;FAe9WGHNfSna5PhKyQcU6Gv1cnpubNdpJGJFIUiVOaFxqqFJqRUfMEfJ3XlnBDaC4glVIhV1LEgnxSkIIP4nJhhzX0p2uTZr6U7XJ7I&#43;F3EluJkmMFSFSIjKwFrSmtSB8j9i&#43;K4dMLU3CZIVhISpaUSAqQFdifuPwrqwyZr6U7XJs19Kdrk5KTgVzEuZMk9sjcSCOUmUUQo5UB9fZL4ODXCsYt3hOJJ0LzkASN2kKV&#43;FKnWurCOzX0p2uTZr6U7XJ7v4i43lM4d1ut9vs/YwyxrX&#43;7Sner9DhS4ZZk3NCI7fejdqBCsqBGv4qHyYRyStKQnFOgp9XJ9zX0p2uTkrq04bbrntDPMLmDIGUgGNax3SABUa1ANfxA8PaeH2KFotZ5Lj4hcaVqkQnJEWQBAKQKnQipH2PiEVmvpTtcmzX0p2uTmbXhNpPHYRK&#43;IE96hSt4kgojotSdRStPZqTV9tOD21xDYpKbne3iFK3qaGOOi1J1FO3s1Jqwhc19Kdrk2a&#43;lO1ycgi1sbe2t13q5yu5SVpENKRpqUgmvc1B000prq7ZOF29hn8aqWUmdUMSLegKsaVVUg6e0KCmuvZhFZr6U7XJs19Kdrk5ePhloI7uU/FXCIZIkIEacFELCjqCD2xp/y&#43;I4RAnjEttcTrjtYUCSWTH2kAgUBHvqoJPrVhE5r6U7XJs19Kdrk5WHgpXa8TMiym5sVpSmMdl/WVfYIJ&#43;Trm4YmHgcF8pZM00tBH4BGtD&#43;JKT8qMI7NfSna5NmvpTtcnJXPB5E3qILeikqlMAUVDRaQM6&#43;4VNfwfo2FjDw&#43;znuLhWU5UpRQqtEitEhNO5IpWulezCLzX0p2uTZr6U7XJyN3ZWkMQlTJJGZbcSxRSEFQOeNCQOkFQ7eHzzJspV3UluhUa1RpWolKwUkJSVGhGh0BYZ819Kdrk2a&#43;lO1ye2HhVxNEJQqNEZh35UtdAEZ7up/28H08HuUySpkXDGmLGsi5AEqyFU0PjUa/rRhhzX0p2uTZr6U7XJytxwGdF7LBEtAAlMUYlWAZFACoH3HpqHlHDJ/hhOpUSMklaY1rAWpIrUgfI/Y0YZM19Kdrk2a&#43;lO1ycjLwqlzuo54kJ3UKqzSBNVLQFUA/En8PF&#43;E8Gu1IrRCVmZUCYysZKkFKgD/Ya9mGHNfSna5NmvpTtcnu/iLkyRpjXDKmTL&#43;oiQFCcRVVT4UGv6Pl7w8WcNoveJkM6VKqhVUkBVNObDFmvpTtcmzX0p2uTlkcDkk4iqEqTDH8UbdIklGSiDQgaakVGug1dC&#43;ET0UpCkdlqRGpYC1oSTVQHyP2LDBmvpTtcmzX0p2uT3ScHuIojIpcPsoRItIXVSULpRRHu9ofd6l8CTHeKtviErAuYod8FUSMgo0IpWvs&#43;/wDXQIfNfSna5NmvpTtcnK3fCkqmCbJJwVLIgLXMFCiEpJJOIpSpJP8A41pTwe4UpVJIN2mLfb4yewUZBNa/iaU7sMGa&#43;lO1ybNfSna5PZY2cF2tEKrgRyrnRGK9sTWp&#43;9Pu7rnhRN/HFZ0MU9wbeEqkyJUMa1NB1DwYRua&#43;lO1ybNfSna5PcnhFyu2TMFRe3EqZCMxmpCSoKIHpifs/MnDZoYRLIuIeylao8xmlKqUJHzHrqwx5r6U7XJs19Kdrk9CrZEl/JBbTIMQWoIkkUEgpFdST6B6ouDLWqYSXMMYRb79C61TIK00&#43;dfswjc19Kdrk2a&#43;lO1ychw7hyb2JKjmpRu4YAhKgmoWF&#43;JBofZD8o4TcrtkTpVF/UiVMiMrGakJKgogemJ&#43;zDDmvpTtcmzX0p2uT2ScLuI7czEx1ShMi4wsZpSaUJHzH3Ds4ZaWd5JHBMubfTSYAR0AjTp7aq9x3000B1YR&#43;a&#43;lO1ybNfSna5OStLawmtbhcibhKoIipUgkTiVdkgDGupI8e1T4PNa2qZbW6nXlSFKQkDxWo0A&#43;1T8mGbNfSna5NmvpTtcnI/wAFeb5EKd0uRUyYVJTICY1q0AV7vH7PPc2MtrFHKpcckchKQqNeQyFKj8RUfdhmzX0p2uTZr6U7XJyP8JciPNUtukJQiReUoqhKwCkkfMeur4OCXhkVGoxIXvDEgKkA3ihTRPv7jXtqGEfmvpTtcmzX0p2uTkF8KIt7SUXMOVyFEpWrHChNak/h/wAMnhe7juVzryTFAmaNUSqiQGRKO/zPzDCPzX0p2uTZr6U7XJ6L&#43;1&#43;DvprcKzCFUSqn1J8D8xR52DNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZgzX0p2uTZr6U7XJmYM19Kdrk2a&#43;lO1yZmDNfSna5NmvpTtcmZh5UCv6kJP&#43;x/8Pzux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNstux5Y2y7GYV7seWNsvqUhJqIxX&#43;4l&#43;2YWRXC448d2k6k1y95r7n6&#43;MX5Sdvk6WYXm9kNKxg0FBVfJ8&#43;MX5Sdvk6WYWi5WJCvdp1AFMvdX09X34xflJ2&#43;TpZhd8Yvyk7fJvjF&#43;Unb5OlmFqrlalIO7T7Jr9XoR7vV9&#43;MX5Sdvk6WYXfGL8pO3yb4xflJ2&#43;TpZhbJcrXGpG7SMgRXLk4Zyji2Excf5Mv95/V/S8BhjRw1EiUgLkJKj76Eh/NXH&#43;TL/ef1f0vAZo18NRGlQK4yQoe6pJeP5O&#43;Bcdm4fU3f4uv05&#43;4E14YT0rBe&#43;2TjaxJ9yAPyeTjK40cPVvYlyJUoAhJpTx7/J7IlZwoWElOSQcT3Dw7ftz3r0OEnq87vnwz&#43;1A/uSGNEsMqUgLkCgojxpSn6uk38Ntf8NvolJmNsmMri1SQUU0JIpr6Vd37kmjXLDElQK4woqA8K0p&#43;jhXn9Hf05t5XuXD6vPh/wBySFnxKGG3igubZcyYJjNFhLhRRAqDoaj2R2ofV&#43;YOIph4pbcQ3BVLFMJpRnQSKzy009nTTxeFnKwEjw3jU/DlQpEUMsUUu9wXGkmulaKIJHYPPHcW4kEk1oJCVqMgC8ElJHYAD2SDUg9u2mjzMwloeL2cVxAfgZFQ20akwpM4ySsmuZJTQ0roKU7fPwZ7VVlfLQtaFT4BMcshkkUQoEkqCQHGMw22N3aW6UGa1lVLGvNEsM&#43;7PhodDpp4UOp&#43;Vv8AMqM9vMqBOUN4u6ISaBRUUHEaafR&#43;bjWYTEPHkxWRt0wSgqhkiIRNjGrLL2immqhXxPg/H8zEEySi0V8VLAmFUm99kUxooJp39kePvcUzCck/cqpLuG5KLlRRcJnXHJdFSKg1okU0H41p&#43;sbw2/Xw68FwgKPsqQoJViaEUND4HXQvKzCTueMmdE6MZ1plgEIM9wZFCkiV1rQdNKAB&#43;f5VEk0u&#43;tyqGa3ihWhMlFDBKQFA096fd409XHMwkLvigubVdsiDdxlURj9upSlCVJodNScq10/B8tuKfD2scG5ywFwK5UrvYwj3eFK&#43;vo8DML7i639vaxYY/DxmOta5VWpVfT6qfJ6IL2z/AI5Fnd2s0u7mXKlUU4R9QSCCChXT&#43;bwMwlo&#43;OrTw9FsfiQqONUSN3clCCDXVSQNSKnxFdPn2bjqZOHSWiYJUiSNCCnff00lJSapRTQnHWpPdxDMN95xP4oXw3OHxd2Lj6q4Uz9ntr9ff0eibj29mkk&#43;GpvJLldN523yAmnbwpX19HEMwlrK&#43;jnhRZTJjTEm2MSs5SjM7wrBCqEJOvjpofe/fFb&#43;2MRgtSMqQpKkEkAISdAT31P8A9XDMwkrjiVpOZrg2H/bnBzWqSsYUe6gimh&#43;dAXbb8bRBLFd/DSfGwoShMiJsUKxACSpNKmlB4gGjiGYbZuLXMljb2aJZY4oo1IUlMhxkJWpVSP8Aanyd0HG5IY7WAoUq3ihXDLFvKCVKlKJ8ND7Wh17AuMZhvjv7RdvDHe2a51W4KY1ImwqmpOKtDUVJ7UOv2sHGEzlZv4FyEzKnQqCXdKjUqlQDQ6aDSmlHGMwlZeP3K/iFRlcMky4lJWiQ1QmNKkge86Ea&#43;nq&#43;L42pJul2sAgkupErkVUKGgNQARoCo19KAeDi2YS54/IZN9uBvlSQySKKtFmNKkmop/8AIK1&#43;fvYcZilukqlt8IEXCJUoCssUoTRKPXSgq4hmG&#43;14rJbW11EUbxdxqmQnWNRBCj61Soj7HwfIL&#43;BJsk3NoZ4rXLJAkx3lSSPA01PzeFmGriF1FeXJnjRMlS9V72ULJPpRKaD0o&#43;215Fa8QVOi3UYFJWgxGTXBSSkjKneh70&#43;TyMwk5&#43;LRLtTbQ2qo4/hfh05S5Ef1t5kdBX3fn6Mri0M8RhubVa4sIQAiXFQVGjCtcToR4U92vvjGYT3/ALMpS1kx3ESTKqVCLe6MYFQNFaajT0PfV4F39vPbITcWqpLiKMxok3tE0JJBIpUkVPiPCvrgZhMQ8eTGta9xKhRTCkKhmwV/TQEUJpXE0rQU/F&#43;F8dWbuK5jhCFxXkt0AVVBzx9nw7Y9/XwcUzCYk46Fyoqi6lhCVpkRcXRkJChQ0NAE0HjQ&#43;tezx3l7DPFbQwW6oo7dJAykyKqqrUmg97xswmDxyCW7NxcWSllF2u5iSmbEDJQJSr2dRoO1PH5dP7hkVaboi5SpKFoQI7kpRRRJ9pIGpGR8RXT5wzMN8nFN4q5O5pv7WO3&#43;r6cN3r28d329fR3ScbQqQyJtSlS7iG4XWSoKkBQIGmgOXrSni4pmErbccXbGMoiUMZJlqKZMSRIlIIBpoRjUH8n5ueMmdE6MZ1plgEIM9wZFCkiV1rQdNKABxjMLbab4a6hnxy3S0rxrStDVyNnxqG3XDJNZqmVb3ZuYsZcQCSmoOhr9Ip2&#43;biWYb4&#43;KYLtlbmu4tZLf6vqz3mvbw3nb09Xy6vra6iK1WihdKQhBk3vs&#43;yAKhNO5A8SR3092FmGnh92myuxMqLeAJUmgNCKilQSDQjuNHun44i4uAuSCZcfwpt1Zz5LUMirLIjvqPDwcQzDfw3in8eEf0d5hdRXH1Urhlp28cu/o0fFN2q2O5ruLWS3&#43;r6s95r20pvO3p6vAzCWuuOyXViYVfEhao0xq/wCyd1RNBXCnc099O&#43;nupsb&#43;0tbOaCW0mXJMaKlinCDh06oVoT397j2YaV3Y&#43;ATaRRlCd4ZFqKqlZ7J8PAV&#43;5fuzukw2t1Co4mQJXGaV9tKqj8ir8njZhMo47DDdi6gslJWu5RcTAy1Cik5Yp09kEnxr4fONVdZcOitMKbuZcmVe&#43;QSKU/1/N0Mw3zcU3qbgbmm/ghh&#43;r6cAkV7eOP5vcn9yr1CkXKEheaBBdGPWgFFUGo9mulDqdXBMwk7bi8cKbfe2ypJId4AsSAGiq6ioNFAmoP5eL93XGvjAuMxrAktk228mmK1CkoXkTTXtT/8AUcSzDVxO4RdcRmliruycUV7lIFB&#43;QDyszAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDi3KOLYTFx/ky/3n9X22uZbScSxKoofYj3F8uP8mX&#43;8/q63qzfKuscrjZljdWPo0fuS1KBnFMFU1AAI/V13X7iQqEptY1iQ6ZLA0/NwDOGdDpy7WOXdvKyx4dz45uqUVKKlEkk1JPi&#43;MznVgzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDMzAzMwMzMDi3KOLYf/Z" alt="Screenshot 2022-12-15 at 4.15.03 PM.png"  />
</p>
<p>前项声明示例子如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript3" data-lang="gdscript3"><span style="display:flex;"><span>fixed4 <span style="color:#66d9ef">func</span>(fixed4 col);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>void frag(inout fixed4 col:COLOR)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> col<span style="color:#f92672">=</span><span style="color:#66d9ef">func</span>(col);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>fixed4 <span style="color:#66d9ef">func</span> (fixed4 col)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span> col<span style="color:#f92672">.</span>x<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> col;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h1 id="cg-include">Cg include<a hidden class="anchor" aria-hidden="true" href="#cg-include">#</a></h1>
<h1 id="内置着色器-include-文件">内置着色器 include 文件<a hidden class="anchor" aria-hidden="true" href="#内置着色器-include-文件">#</a></h1>
<p>Unity 提供了若干文件供
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-ShaderPrograms.html" alt="着色器程序"  />

用于引入预定义的变量和 helper 函数。这可以通过标准 <code>#include</code> 指令来完成，例如：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>CGPROGRAM
</span></span><span style="display:flex;"><span>// ...
</span></span><span style="display:flex;"><span>#include&#34;UnityCG.cginc&#34;
</span></span><span style="display:flex;"><span>// ...
</span></span><span style="display:flex;"><span>ENDCG
</span></span></code></pre></div><p>Unity 中的着色器 include 文件采用 <code>.cginc</code> 扩展名，内置的着色器 include 文件包括：</p>
<ul>
<li><code>HLSLSupport.cginc</code> -_（自动包含）_用于跨平台着色器编译的 helper 宏和定义。</li>
<li><code>UnityShaderVariables.cginc</code> -_（自动包含）_常用的全局变量。</li>
<li><code>UnityCG.cginc</code> - 常用的
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-BuiltinFunctions.html" alt="helper 函数"  />

。</li>
<li><code>AutoLight.cginc</code> - 光照和阴影功能，例如
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-SurfaceShaders.html" alt="表面着色器"  />

在内部使用此文件。</li>
<li><code>Lighting.cginc</code> - 标准
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-SurfaceShaders.html" alt="表面着色器"  />

光照模型；当您编写表面着色器时会自动包含。</li>
<li><code>TerrainEngine.cginc</code> - 地形和植被着色器的 helper 函数。</li>
</ul>
<p>如果您要查看任何 helper 代码具体执行的操作，可在 Unity 应用程序中找到这些文件（Windows 上位于 {unity 安装路径}/Data/CGIncludes/UnityCG.cginc__，Mac 上位于 /Applications/Unity/Unity.app/Contents/CGIncludes/UnityCG.cginc__）。</p>
<h2 id="hlslsupportcginc">HLSLSupport.cginc<a hidden class="anchor" aria-hidden="true" href="#hlslsupportcginc">#</a></h2>
<p>编译 CGPROGRAM 着色器时会自动包含此文件（但不会对 HLSLPROGRAM 着色器包含此文件）。此文件声明各种
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-BuiltinMacros.html" alt="预处理器宏"  />

以帮助进行多平台着色器开发。</p>
<h2 id="unityshadervariablescginc">UnityShaderVariables.cginc<a hidden class="anchor" aria-hidden="true" href="#unityshadervariablescginc">#</a></h2>
<p>编译 CGPROGRAM 着色器时会自动包含此文件（但不会对 HLSLPROGRAM 着色器包含此文件）。此文件声明着色器中常用的各种
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-UnityShaderVariables.html" alt="内置全局变量"  />

。</p>
<h2 id="unitycgcginc">UnityCG.cginc<a hidden class="anchor" aria-hidden="true" href="#unitycgcginc">#</a></h2>
<p>Shader 对象中通常会包含此文件。此文件声明大量
<img loading="lazy" src="https://docs.unity3d.com/cn/2021.3/Manual/SL-BuiltinFunctions.html" alt="内置 helper 函数"  />

和数据结构。</p>
<h3 id="unitycgcginc-中的数据结构">UnityCG.cginc 中的数据结构<a hidden class="anchor" aria-hidden="true" href="#unitycgcginc-中的数据结构">#</a></h3>
<ul>
<li>struct <code>appdata_base</code>：顶点着色器输入，包含位置、法线和一个纹理坐标。</li>
<li>struct <code>appdata_tan</code>：顶点着色器输入，包含位置、法线、切线和一个纹理坐标。</li>
<li>struct <code>appdata_full</code>：顶点着色器输入，包含位置、法线、切线、顶点颜色和两个纹理坐标。</li>
<li>struct <code>appdata_img</code>: 顶点着色器输入，包含位置和一个纹理坐标。</li>
</ul>
<h2 id="cg数学函数mathematical-functions">Cg数学函数Mathematical Functions<a hidden class="anchor" aria-hidden="true" href="#cg数学函数mathematical-functions">#</a></h2>
<p><img loading="lazy" src="CG%E8%AF%AD%E8%A8%80-%E5%87%BD%E6%95%B0%20c8578f17b3b746d0ac8957499918c3a9/Cg%E6%95%B0%E5%AD%A6%E5%87%BD%E6%95%B0%20bfcc518d761e4cb9bd8be94dc281510a.md" alt="Cg数学函数"  />
</p>
<h2 id="几何函数-geometric-functions">几何函数 Geometric Functions<a hidden class="anchor" aria-hidden="true" href="#几何函数-geometric-functions">#</a></h2>
<p>函数</p>
<p>功能描述</p>
<p>distance(pt1, pt2)</p>
<p>两点之间的欧几里德距离（Euclidean distance）</p>
<p>faceforward(N,I,Ng)</p>
<p>如果dot( Ng , I ) &lt; 0,返回N；否则返回-N。</p>
<p>length(v)</p>
<p>返回一个向量的模,即sqrt(dot(v,v))</p>
<p>normalize(v)</p>
<p>返回v向量的单位向量</p>
<p>reflect(I, N)</p>
<p>根据入射光线方向I和表面法向量N计算反射向量,仅对三元向量有效</p>
<p>refract(I,N,eta)</p>
<p>根据入射光线方向I,表面法向量N和折射相对系数eta,计算折射向量。如果对给定的eta,I和N之间的角度太大,返回(0,0,0)。只对三元向量有效</p>
<h2 id="贴图函数-texture-map-functions">贴图函数 Texture Map Functions<a hidden class="anchor" aria-hidden="true" href="#贴图函数-texture-map-functions">#</a></h2>
<p>函数</p>
<p>功能描述</p>
<p>tex1D(sampler1D tex, float s)</p>
<p>一维纹理查询</p>
<p>tex1D(sampler1D tex, float s, float dsdx, float dsdy)</p>
<p>使用导数值（derivatives）查询一维纹理</p>
<p>Tex1D(sampler1D tex, float2 sz)</p>
<p>一维纹理查询,并进行深度值比较</p>
<p>Tex1D(sampler1D tex, float2 sz, float dsdx,float dsdy)</p>
<p>使用导数值（derivatives）查询一维纹理, 并进行深度值比较</p>
<p>Tex1Dproj(sampler1D tex, float2 sq)</p>
<p>一维投影纹理查询</p>
<p>Tex1Dproj(sampler1D tex, float3 szq)</p>
<p>一维投影纹理查询,并比较深度值</p>
<p>Tex2D(sampler2D tex, float2 s)</p>
<p>二维纹理查询</p>
<p>Tex2D(sampler2D tex, float2 s, float2 dsdx, float2 dsdy)</p>
<p>使用导数值（derivatives）查询二维纹理</p>
<p>Tex2D(sampler2D tex, float3 sz)</p>
<p>二维纹理查询,并进行深度值比较</p>
<p>Tex2D(sampler2D tex, float3 sz, float2 dsdx,float2 dsdy)</p>
<p>使用导数值（derivatives）查询二维纹理,并进行深度值比较</p>
<p>Tex2Dproj(sampler2D tex, float3 sq)</p>
<p>二维投影纹理查询</p>
<p>Tex2Dproj(sampler2D tex, float4 szq)</p>
<p>二维投影纹理查询,并进行深度值比较</p>
<p>texRECT(samplerRECT tex, float2 s)</p>
<p>二维非投影矩形纹理查询（OpenGL独有）</p>
<p>texRECT (samplerRECT tex, float3 sz, float2 dsdx,float2 dsdy)</p>
<p>二维非投影使用导数的矩形纹理查询（OpenGL独有）</p>
<p>texRECT (samplerRECT tex, float3 sz)</p>
<p>二维非投影深度比较矩形纹理查询（OpenGL独有）</p>
<p>texRECT (samplerRECT tex, float3 sz, float2 dsdx,float2 dsdy)</p>
<p>二维非投影深度比较并使用导数的矩形纹理查询（OpenGL独有）</p>
<p>texRECT proj(samplerRECT tex, float3 sq)</p>
<p>二维投影矩形纹理查询（OpenGL独有）</p>
<p>texRECT proj(samplerRECT tex, float3 szq)</p>
<p>二维投影矩形纹理深度比较查询（OpenGL独有）</p>
<p>Tex3D(sampler3D tex, float s)</p>
<p>三维纹理查询</p>
<p>Tex3D(sampler3D tex, float3 s, float3 dsdx, float3 dsdy)</p>
<p>结合导数值（derivatives）查询三维纹理</p>
<p>Tex3Dproj(sampler3D tex, float4 szq)</p>
<p>查询三维投影纹理,并进行深度值比较</p>
<p>texCUBE(samplerCUBE tex, float3 s)</p>
<p>查询立方体纹理</p>
<p>texCUBE (samplerCUBE tex, float3 s, float3 dsdx, float3 dsdy)</p>
<p>结合导数值（derivatives）查询立方体纹理</p>
<p>texCUBEproj (samplerCUBE tex, float4 sq)</p>
<p>查询投影立方体纹理</p>
<h2 id="导数函数-derivative-functions">导数函数 Derivative Functions<a hidden class="anchor" aria-hidden="true" href="#导数函数-derivative-functions">#</a></h2>
<p>函数</p>
<p>功能描述</p>
<p>ddx(a)</p>
<p>近似a关于屏幕空间x轴的偏导数</p>
<p>ddy(a)</p>
<p>近似a关于屏幕空间y轴的偏导数</p>
<h2 id="调试函数-debugging-function">调试函数 Debugging Function<a hidden class="anchor" aria-hidden="true" href="#调试函数-debugging-function">#</a></h2>
<p>函数</p>
<p>功能描述</p>
<p>void debug(float4 x)</p>
<p>如果在编译时设置了DEBUG,片段着 色程序中调用该函数可以将值x作为COLOR语义的最终输出；否则该函数什么也不做。</p>


        </div>
        <div class="post-reward">
            <div style="padding: 0 0 0 0; margin: 0 0 0 0; width: 100%; font-size:16px; text-align: center;">
                <div id="QR" style="opacity: 0;">
                    <div id="wechat" style="display: inline-block">
                        <a class="fancybox" rel="group">
                            <img id="wechat_qr" src="http://localhost:1313/img/wechat_pay.jpg" alt="wechat_pay"></a>
                        <p>微信</p>
                    </div>
                    <div id="alipay" style="display: inline-block">
                        <a class="fancybox" rel="group">
                            <img id="alipay_qr" src="http://localhost:1313/img/alipay.jpg" alt="alipay"></a>
                        <p>支付宝</p>
                    </div>
                </div>
                <button id="rewardButton"
                        onclick="
                    var qr = document.getElementById('QR');
                    if (qr.style.opacity === '0') {
                        qr.style.opacity='1';
                    } else {
                        qr.style.opacity='0'
                    }"
                >
                    <span>🧧 鼓励</span>
                </button>
            </div>
        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="http://localhost:1313/en/posts/shader/3d%E6%95%B0%E5%AD%A6%E5%9F%BA%E7%A1%80-%E5%9D%90%E6%A0%87%E7%B3%BB/">
    <span class="title">« 👈 Prev Page</span>
    <br>
    <span>3D数学基础-坐标系</span>
  </a>
  <a class="next" href="http://localhost:1313/en/posts/shader/cg%E8%AF%AD%E8%A8%80-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/">
    <span class="title">Next Page 👉 »</span>
    <br>
    <span>CG语言-流程控制</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share CG语言-函数 on twitter"
       href="https://twitter.com/intent/tweet/?text=CG%e8%af%ad%e8%a8%80-%e5%87%bd%e6%95%b0&amp;url=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f&amp;hashtags=">
    <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share CG语言-函数 on linkedin"
       href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f&amp;title=CG%e8%af%ad%e8%a8%80-%e5%87%bd%e6%95%b0&amp;summary=CG%e8%af%ad%e8%a8%80-%e5%87%bd%e6%95%b0&amp;source=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share CG语言-函数 on reddit"
       href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f&title=CG%e8%af%ad%e8%a8%80-%e5%87%bd%e6%95%b0">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share CG语言-函数 on facebook"
       href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share CG语言-函数 on whatsapp"
       href="https://api.whatsapp.com/send?text=CG%e8%af%ad%e8%a8%80-%e5%87%bd%e6%95%b0%20-%20http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share CG语言-函数 on telegram"
       href="https://telegram.me/share/url?text=CG%e8%af%ad%e8%a8%80-%e5%87%bd%e6%95%b0&amp;url=http%3a%2f%2flocalhost%3a1313%2fen%2fposts%2fshader%2fcg%25E8%25AF%25AD%25E8%25A8%2580-%25E5%2587%25BD%25E6%2595%25B0%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

        </footer>
    </div>

<style>
    .comments_details summary::marker {
        font-size: 20px;
        content: '👉展开评论';
        color: var(--content);
    }
    .comments_details[open] summary::marker{
        font-size: 20px;
        content: '👇关闭评论';
        color: var(--content);
    }
</style>


<div>
    <details class="comments_details">
        <summary style="cursor: pointer; margin: 50px 0 20px 0;width: 130px;">
            <span style="font-size: 20px;color: var(--content);">...</span>
        </summary>
        <div id="tcomment"></div>
    </details>
    <script src="https://cdn.staticfile.org/twikoo/1.5.8/twikoo.all.min.js">
    </script>
    <script>
        twikoo.init({
            envId:  null ,
        el: "#tcomment",
            lang: 'zh-CN',
            region:  null ,
        path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
        })
    </script>
</div>
</article>
</main>

<footer class="footer">
    <span>
        Copyright
        &copy;
        2023-2024
        <a href="http://localhost:1313/en/" style="color:#939393;">Eitan&#39;s Blog</a>
        All Rights Reserved
    </span>
    <a href="https://beian.miit.gov.cn/" target="_blank" style="color:#939393;"></a>&nbsp;
    <span>
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=null"
           style="display:inline-block;text-decoration:none;height:20px;color:#939393;">
            <img src="" style="float:left;margin: 0px 5px 0px 0px;"/>
            
        </a>
    </span>
    <span id="busuanzi_container">
        <span class="fa fa-user"></span> <span id="busuanzi_value_site_uv"></span>
        <span class="fa fa-eye"></span> <span id="busuanzi_value_site_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        (function() {
            document.cookie = "change-themes" + "="+ escape ("false");
        })()

        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    });
</script>

<script>
    document.body.addEventListener('copy', function (e) {
        if (window.getSelection().toString() && window.getSelection().toString().length > 50) {
            let clipboardData = e.clipboardData || window.clipboardData;
            if (clipboardData) {
                e.preventDefault();
                let htmlData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「'+"Eitan's Blog"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                let textData = window.getSelection().toString() +
                    '\r\n\n————————————————\r\n' +
                    '版权声明：本文为「'+"Eitan's Blog"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                clipboardData.setData('text/html', htmlData);
                clipboardData.setData('text/plain', textData);
            }
        }
    });
</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;
        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '📄copy';

        function copyingDone() {
            copybutton.innerText = '👌🏻copied!';
            setTimeout(() => {
                copybutton.innerText = '📄copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                let text = codeblock.textContent +
                    '\r\n————————————————\r\n' +
                    '版权声明：本文为「'+"Eitan's Blog"+'」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。' +
                '\r\n原文链接：' + location.href;
                navigator.clipboard.writeText(text);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {}
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>

<script>
    $("code[class^=language] ").on("mouseover", function () {
        if (this.clientWidth < this.scrollWidth) {
            $(this).css("width", "135%")
            $(this).css("border-top-right-radius", "var(--radius)")
        }
    }).on("mouseout", function () {
        $(this).css("width", "100%")
        $(this).css("border-top-right-radius", "unset")
    })
</script>
</body>

</html>
